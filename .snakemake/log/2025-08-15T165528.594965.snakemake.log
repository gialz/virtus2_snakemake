Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cluster nodes: 8
Job stats:
job                     count
--------------------  -------
all                         1
bam_filter_polyx            1
bam_to_fastq_pe             1
extract_unmapped_bam        1
fastq_pair                  1
final_report                1
kz_filter_pe                1
samtools_coverage           1
star_virus_pe               1
total                       9

Select jobs to execute...

[Fri Aug 15 16:55:31 2025]
rule extract_unmapped_bam:
    input: /SAN/vyplab/first_weeks/COVID_BRAIN/VIRTUS2_snakemake/results/human/SRR16948790.Aligned.sortedByCoord.out.bam
    output: results/unmapped/raw/testing_bam_unmapped.bam
    log: logs/testing_bam_extract_unmapped.log
    jobid: 8
    reason: Missing output files: results/unmapped/raw/testing_bam_unmapped.bam
    wildcards: sample=testing_bam
    threads: 4
    resources: mem_mb=4571, mem_mib=4360, disk_mb=4571, disk_mib=4360, tmpdir=<TBD>

[Fri Aug 15 16:57:21 2025]
Finished job 8.
1 of 9 steps (11%) done
Select jobs to execute...

[Fri Aug 15 16:57:21 2025]
rule bam_to_fastq_pe:
    input: results/unmapped/raw/testing_bam_unmapped.bam
    output: results/unmapped/testing_bam_1.fq, results/unmapped/testing_bam_2.fq
    log: logs/testing_bam_bamtofastq_pe.log
    jobid: 7
    reason: Missing output files: results/unmapped/testing_bam_1.fq, results/unmapped/testing_bam_2.fq; Input files updated by another job: results/unmapped/raw/testing_bam_unmapped.bam
    wildcards: sample=testing_bam
    threads: 2
    resources: mem_mb=1000, mem_mib=954, disk_mb=1000, disk_mib=954, tmpdir=<TBD>

[Fri Aug 15 16:58:41 2025]
Finished job 7.
2 of 9 steps (22%) done
Select jobs to execute...

[Fri Aug 15 16:58:41 2025]
rule kz_filter_pe:
    input: results/unmapped/testing_bam_1.fq, results/unmapped/testing_bam_2.fq
    output: results/unmapped/testing_bam_kz_1.fq, results/unmapped/testing_bam_kz_2.fq
    log: logs/testing_bam_kz.log
    jobid: 6
    reason: Missing output files: results/unmapped/testing_bam_kz_1.fq, results/unmapped/testing_bam_kz_2.fq; Input files updated by another job: results/unmapped/testing_bam_1.fq, results/unmapped/testing_bam_2.fq
    wildcards: sample=testing_bam
    resources: mem_mb=1000, mem_mib=954, disk_mb=1000, disk_mib=954, tmpdir=<TBD>

[Fri Aug 15 16:59:41 2025]
Error in rule kz_filter_pe:
    jobid: 6
    input: results/unmapped/testing_bam_1.fq, results/unmapped/testing_bam_2.fq
    output: results/unmapped/testing_bam_kz_1.fq, results/unmapped/testing_bam_kz_2.fq
    log: logs/testing_bam_kz.log (check log file(s) for error details)
    shell:
        
            mkdir -p results/unmapped logs
            kz --filter --threshold 0.1 < results/unmapped/testing_bam_1.fq > results/unmapped/testing_bam_kz_1.fq 2> logs/testing_bam_kz.log
            kz --filter --threshold 0.1 < results/unmapped/testing_bam_2.fq > results/unmapped/testing_bam_kz_2.fq 2>> logs/testing_bam_kz.log
            
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Error executing rule kz_filter_pe on cluster (jobid: 6, external: 60203, jobscript: /SAN/vyplab/first_weeks/github_test/.snakemake/tmp.58olwl1n/snakejob.kz_filter_pe.6.sh). For error details see the cluster log and the log files of the involved rule(s).
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2025-08-15T165528.594965.snakemake.log
